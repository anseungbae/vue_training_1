import{p as H,g as se,d as B,C as T,A as u,U as pe,a as M,h as ie,w as a,i as r,e as l,f as c,b as F,r as E,F as L,P as Z,v as A,E as j,l as ee,s as K,n as le,m as te,H as ae,k as ue,Q as oe,q,c as ne,L as de,x as Q,R as ce,S as re,T as me,o as fe}from"./index-DvlLjNFd.js";/* empty css                  *//* empty css                 *//* empty css                  */import{d as J}from"./el-date-picker-DV7JN7Bd.js";/* empty css               */import{_ as ge}from"./index.vue_vue_type_script_setup_true_lang-DrjQ59DJ.js";const O="admin/popup",_e=O+"/list",he=O+"/detail",be=O+"/save",ve=O+"/delete",xe=x=>H(_e,x),Pe=x=>se(he,x),De=(x,C)=>H(be,x,C),ye=x=>H(ve,x),G={getPopupList:xe,getPopupDetail:Pe,savePopup:De,deletePopupList:ye},Ye=r("hr",null,null,-1),we={class:"flex justify-end my-3"},Ce={class:"modal-box min-w-[920px] min-h[350px]"},Se=r("p",{class:"mx-4 basic-font"},"X",-1),Ve=r("p",{class:"mx-2 basic-font"},"X",-1),ke=r("p",{class:"mx-4 basic-font"},"Y",-1),Ue=B({__name:"PopupDetailPopup",emits:["onPopupDetailInfoSaveComplete"],setup(x,{expose:C,emit:f}){const S=f,_=T(new Date),i=u([_.format("YYYY.MM.DD"),_.add(1,"month").format("YYYY.MM.DD")]),Y=u(null),D=u(null);u(null);const h=u(!1),e=pe({pkId:null,saveMode:null,popType:null,title:null,postYn:null,postStartAt:null,postEndAt:null,fileName:null,mobileFileName:null,imageDesc:null,popWidth:null,popHeight:null,popX:null,popY:null,linkUrl:null,fileGroupId:null,fileId:null,mobileFileId:null,selectFile:null,selectMobileFile:null}),b=[{value:"G",label:"일반"},{value:"L",label:"레이어"}],m=[{value:"Y",label:"게시",text:"게시"},{value:"N",label:"게시안함",text:"게시안함"}],g=()=>{const o={id:e.pkId};G.getPopupDetail(o).then(t=>{console.log("getBizDetailInfo ",t.data),e.saveMode="update",e.popType=t.data.popType,e.title=t.data.title,e.postYn=t.data.postYn,e.postStartAt=t.data.postStartAt,e.postEndAt=t.data.postEndAt,e.imageDesc=t.data.imageDesc,e.popX=t.data.popX,e.popY=t.data.popY,e.popWidth=t.data.popWidth,e.popHeight=t.data.popHeight,e.linkUrl=t.data.linkUrl,t.data.fileGroupId?(e.fileGroupId=t.data.fileGroupId,e.fileId=t.data.fileId,e.mobileFileId=t.data.mobileFileId,e.fileName=t.data.oriFileName,e.mobileFileName=t.data.oriMobileFileName):(e.fileGroupId=null,e.fileId=null,e.mobileFileId=null,e.fileName=null,e.mobileFileName=null)})},d=()=>{const o=new FormData;o.append("uploadFile",e.selectFile),o.append("uploadMobileFile",e.selectMobileFile),o.append("saveMode",e.saveMode),o.append("id",e.pkId),o.append("popType",e.popType),o.append("title",e.title),o.append("postYn",e.postYn),o.append("postStartAt",T(e.postStartAt).format("YYYYMMDD")),o.append("postEndAt",T(e.postEndAt).format("YYYYMMDD")),o.append("imageDesc",e.imageDesc),o.append("popX",e.popX),o.append("popY",e.popY),o.append("popWidth",e.popWidth),o.append("popHeight",e.popHeight),o.append("fileGroupId",e.fileGroupId),o.append("fileId",e.fileId),o.append("mobileFileId",e.mobileFileId),o.append("linkUrl",e.linkUrl);const t={headers:{"Content-Type":"multipart/form-data; charset: UTF-8;"}};console.log("formData",o),G.savePopup(o,t).then(s=>{let n="";s.status==200?n="저장하였습니다.":n="저장에 실패하였습니다.",A.alert(n,"알람",{confirmButtonText:"확인"}).then(()=>{S("onPopupDetailInfoSaveComplete"),h.value=!1,console.log("OK")})})},y=()=>{A.confirm("저장하시겠습니까?","알람",{confirmButtonText:"확인",cancelButtonText:"취소"}).then(()=>{console.log("onPopupDetailSaveBtnClick",e),d()}).catch(o=>console.log("~~~~~~~~~~~~~~~~~ onPopupDetailSaveBtnClick catch : ",o))},N=()=>{Y.value.click()},R=()=>{D.value.click()},I=o=>{e.selectFile=o.target.files[0],e.fileName=o.target.files[0].name},v=o=>{e.selectMobileFile=o.target.files[0],e.mobileFileName=o.target.files[0].name},z=o=>{o==null?e.dateRange="":e.dateRange=o},$=o=>{e.pkId=o,X(),e.pkId&&g(),h.value=!0},X=()=>{e.saveMode="insert",e.popType="G",e.title=null,e.postYn="Y",e.postStartAt=i.value[0],e.postEndAt=i.value[1],e.fileName=null,e.mobileFileName=null,e.imageDesc=null,e.popWidth=null,e.popHeight=null,e.popX=null,e.popY=null,e.linkUrl=null,e.fileGroupId=null,e.fileId=null,e.mobileFileId=null,e.selectFile=null,e.selectMobileFile=null};return C({open:$}),(o,t)=>{const s=j,n=ee,V=q,k=K,U=le,w=te,W=ae,P=ue;return M(),ie(P,{modelValue:h.value,"onUpdate:modelValue":t[12]||(t[12]=p=>h.value=p),"align-center":"",class:"modal-title modal-small",title:"팝업관리 저장"},{default:a(()=>[Ye,r("div",we,[l(s,{class:"basic-button",onClick:y},{default:a(()=>[c("저장")]),_:1})]),r("div",Ce,[r("div",null,[l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("팝업 구분")]),_:1}),l(n,{span:21,class:"input-content"},{default:a(()=>[l(k,{modelValue:e.popType,"onUpdate:modelValue":t[0]||(t[0]=p=>e.popType=p),style:{width:"150px"}},{default:a(()=>[(M(),F(L,null,E(b,p=>l(V,{key:p.value,label:p.label,value:p.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("제목")]),_:1}),l(n,{span:21,class:"input-content"},{default:a(()=>[l(w,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=p=>e.title=p),placeholder:"팝업제목"},null,8,["modelValue"])]),_:1})]),_:1}),l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("게시여부")]),_:1}),l(n,{span:9,class:"input-content"},{default:a(()=>[l(k,{modelValue:e.postYn,"onUpdate:modelValue":t[2]||(t[2]=p=>e.postYn=p),placeholder:"전체",style:{height:"24px",width:"150px","margin-top":"2px"}},{default:a(()=>[(M(),F(L,null,E(m,p=>l(V,{key:p.value,label:p.label,value:p.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(n,{span:3,class:"input-label"},{default:a(()=>[c("게시일자")]),_:1}),l(n,{span:9,class:"input-content"},{default:a(()=>[l(W,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=p=>i.value=p),type:"daterange","range-separator":"~",format:"YYYY.MM.DD","value-format":"YYYY.MM.DD",onChange:z,clearable:!1},null,8,["modelValue"])]),_:1})]),_:1}),l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("이미지")]),_:1}),l(n,{span:9,class:"input-content"},{default:a(()=>[l(w,{modelValue:e.fileName,"onUpdate:modelValue":t[4]||(t[4]=p=>e.fileName=p),"input-style":{fontSize:"12px"},readonly:"",style:{"margin-right":"10px"},placeholder:"이미지 파일"},null,8,["modelValue"]),l(s,{class:"basic-button",onClick:N},{default:a(()=>[c("파일선택")]),_:1})]),_:1}),Z(r("input",{ref_key:"fileRef",ref:Y,type:"file",accept:"image/*",onChange:I},null,544),[[oe,!1]]),l(n,{span:3,class:"input-label"},{default:a(()=>[c("모바일이미지")]),_:1}),l(n,{span:9,class:"input-content"},{default:a(()=>[l(w,{modelValue:e.mobileFileName,"onUpdate:modelValue":t[5]||(t[5]=p=>e.mobileFileName=p),"input-style":{fontSize:"12px"},readonly:"",style:{"margin-right":"10px"},placeholder:"모바일 이미지 파일"},null,8,["modelValue"]),l(s,{class:"basic-button",onClick:R},{default:a(()=>[c("파일선택")]),_:1})]),_:1}),r("input",{ref_key:"mobileFileRef",ref:D,type:"file",accept:"image/*",onChange:v,style:{display:"none"}},null,544)]),_:1}),l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("이미지 설명")]),_:1}),l(n,{span:21,class:"input-content"},{default:a(()=>[l(w,{modelValue:e.imageDesc,"onUpdate:modelValue":t[6]||(t[6]=p=>e.imageDesc=p),"input-style":{fontSize:"12px"},placeholder:"이미지 설명"},null,8,["modelValue"])]),_:1})]),_:1}),l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("이미지 크기")]),_:1}),l(n,{span:9,class:"input-content"},{default:a(()=>[l(w,{modelValue:e.popWidth,"onUpdate:modelValue":t[7]||(t[7]=p=>e.popWidth=p),style:{width:"80px"},placeholder:"팝업넓이"},null,8,["modelValue"]),Se,l(w,{modelValue:e.popHeight,"onUpdate:modelValue":t[8]||(t[8]=p=>e.popHeight=p),style:{width:"80px"},placeholder:"팝업높이"},null,8,["modelValue"])]),_:1}),l(n,{span:3,class:"input-label"},{default:a(()=>[c("팝업 위치")]),_:1}),l(n,{span:9,class:"input-content"},{default:a(()=>[Ve,l(w,{modelValue:e.popX,"onUpdate:modelValue":t[9]||(t[9]=p=>e.popX=p),style:{width:"100px"},placeholder:"Open X좌표"},null,8,["modelValue"]),ke,l(w,{modelValue:e.popY,"onUpdate:modelValue":t[10]||(t[10]=p=>e.popY=p),style:{width:"100px"},placeholder:"Open Y좌표"},null,8,["modelValue"])]),_:1})]),_:1}),l(U,{class:"row-box"},{default:a(()=>[l(n,{span:3,class:"input-label"},{default:a(()=>[c("Link URL ")]),_:1}),l(n,{span:21,class:"input-content"},{default:a(()=>[l(w,{modelValue:e.linkUrl,"onUpdate:modelValue":t[11]||(t[11]=p=>e.linkUrl=p),"input-style":{fontSize:"12px"},placeholder:"Link URL"},null,8,["modelValue"])]),_:1})]),_:1})])])]),_:1},8,["modelValue"])}}}),Me={class:"grid-header-box"},Ie=r("p",null,null,-1),Fe={class:"button-box"},Ae={class:"grid-box flex flex-col flex-1"},Le={class:"flex"},Ne={class:"total-page-label"},Re={class:"data-grid-large-box"},Te=B({__name:"PopupManageGrid",props:{data:{type:Object},pageParam:{type:Object}},emits:["changePage","getDeleteList"],setup(x,{expose:C,emit:f}){const S=u(),_=u(null);u(null);const i=x,Y=u([]),D=u(null),h=u(null),e=u([{headerName:"번호",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0,width:80,cellStyle:{textAlign:"center"}},{field:"popTypeName",headerName:"구분",width:120,flex:1,cellStyle:{textAlign:"center"}},{field:"title",headerName:"제목",width:400,suppressSizeToFit:!0,flex:6,cellStyle:{textAlign:"left",textDecoration:"underline",cursor:"pointer"}},{field:"postYn",headerName:"게시 여부",cellClass:"centered",width:140,flex:1,cellStyle:{textAlign:"center"}},{field:"viewPostStartAt",headerName:"게시 시작일",cellClass:"centered",valueFormatter:s=>J(s),width:160,flex:2,cellStyle:{textAlign:"center"}},{field:"viewPostEndAt",headerName:"게시 종료일",cellClass:"centered",flex:2,valueFormatter:s=>J(s),width:160,cellStyle:{textAlign:"center"}},{field:"fileUrl",headerName:"미리보기",cellClass:"centered",flex:1}]),b=f,m=u(0),g=u(0),d=u(0),y=u(0),N=[{value:10,label:"10개씩"},{value:20,label:"20개씩"},{value:30,label:"30개씩"},{value:50,label:"50개씩"},{value:100,label:"100개씩"}],R=s=>{if(s.colDef.field==="title")_.value.open(s.data.id);else if(s.colDef.field==="fileUrl")if(s.value)if(s.data&&s.data.popType==="G"){const n=new Image;n.src=s.value;const V="width="+s.data.popWidth+", height="+s.data.popHeight+", left="+s.data.popX+", top="+s.data.popY,k=window.open("",s.data.title,V);k.document.write("<html><body style='margin:0'>"),k.document.write(`<a href=javascript:window.close()><img src='${n.src}' style="object-fit: none;" alt='${s.data.imageDesc}'></a>`),k.document.write("</body><html>"),k.document.title=s.data.title}else s.data&&s.data.popType;else A.alert("팝업 정보가 없습니다.","알림",{confirmButtonText:"확인"});else console.log("~~~~~~ etc Cell Click : ")},I=()=>{b("changePage",i.pageParam)},v=()=>{i.pageParam.pageNo=1,i.pageParam.rowCnt=y.value,b("changePage",i.pageParam)},z=()=>{_.value.open(null)},$=()=>{const s=D.value.getSelectedRows();if(s&&s.length>0){const n=s.map(V=>V.id);A.confirm("삭제하시겠습니까?","삭제",{confirmButtonText:"확인",cancelButtonText:"취소",type:"warning"}).then(()=>{b("getDeleteList",n)}).catch(()=>{})}else A.alert("삭제할 목록을 선택해 주세요.","알림",{confirmButtonText:"확인"})},X=()=>{m.value=Number(i.data.totalElements),d.value=i.pageParam.pageNo*i.pageParam.rowCnt,g.value=d.value-(i.pageParam.rowCnt-1),d.value>m.value&&(d.value=m.value),y.value=i.pageParam.rowCnt,Y.value=i.data.popupList},o=s=>{D.value=s==null?void 0:s.api,h.value="fitGridWidth"},t=ne(()=>Y.value||[]);return de(i,()=>{X()}),C({gridRef:S}),(s,n)=>{const V=j,k=q,U=K,w=ge,W=ce;return M(),F(L,null,[r("div",{ref_key:"gridRef",ref:S,class:"grid-box flex flex-col flex-1 mt-5 h-full min-w-[1200px]"},[r("div",Me,[Ie,r("div",Fe,[l(V,{class:"basic-button",round:"",onClick:z},{default:a(()=>[c("등록")]),_:1}),l(V,{class:"basic-button",round:"",onClick:$},{default:a(()=>[c("삭제")]),_:1})])]),r("div",Ae,[r("div",Le,[l(U,{placeholder:"20개씩",style:{width:"100px",margin:"15px 5px 0px 20px"},modelValue:y.value,"onUpdate:modelValue":n[0]||(n[0]=P=>y.value=P),onChange:v},{default:a(()=>[(M(),F(L,null,E(N,P=>l(k,{key:P.value,label:P.label,value:P.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),r("div",Ne,Q(`전체 ${m.value}개 중`),1),Z(r("div",{class:"current-pagerange-label"},Q(`${g.value}~${d.value}개`),513),[[oe,m.value!==0]])]),r("div",Re,[l(w,{ref:"memberGridRef",rowSelection:"multiple",class:"ag-theme-quartz",rowData:t.value,autoSize:h.value,columnDefs:e.value,onOnGridReady:o,onOnGridCellClick:R},null,8,["rowData","autoSize","columnDefs"])]),l(W,{class:"footer-pagination","current-page":i.pageParam.pageNo,"onUpdate:currentPage":n[1]||(n[1]=P=>i.pageParam.pageNo=P),"page-size":y.value,"onUpdate:pageSize":n[2]||(n[2]=P=>y.value=P),total:m.value,"onUpdate:total":n[3]||(n[3]=P=>m.value=P),"page-sizes":[10,20,30,50,100],layout:" prev, pager, next",onSizeChange:I,onCurrentChange:I},null,8,["current-page","page-size","total"])])],512),l(Ue,{ref_key:"popupDetailPopRef",ref:_,onOnPopupDetailInfoSaveComplete:v},null,512)],64)}}}),Ee={class:"searchbox-box"},Ge={class:"flex-col my-auto"},Be=B({__name:"PopupManageSearch",props:{searchParam:{type:Object}},emits:["getSearchList"],setup(x,{emit:C}){const f=x,S=C,_=T(new Date),i=u([_.add(-1,"month").format("YYYY.MM.DD"),_.format("YYYY.MM.DD")]),Y=[{value:"",label:"전체",text:"전체"},{value:"Y",label:"게시",text:"게시"},{value:"N",label:"게시안함",text:"게시안함"}],D=()=>{f.searchParam.title="",f.searchParam.postYn="",i.value=[_.add(-1,"month").format("YYYY.MM.DD"),_.format("YYYY.MM.DD")],f.searchParam.fromCreatedAt=i.value[0],f.searchParam.toCreatedAt=i.value[1],h()},h=()=>{f.searchParam.fromCreatedAt=i.value[0],f.searchParam.toCreatedAt=i.value[1],S("getSearchList",f.searchParam)};return ne(()=>Y),(e,b)=>{const m=ee,g=te,d=le,y=ae,N=q,R=K,I=j;return M(),F("div",Ee,[r("div",null,[l(d,null,{default:a(()=>[l(m,{span:2,class:"search-label"},{default:a(()=>[c("제목")]),_:1}),l(m,{span:5},{default:a(()=>[l(g,{modelValue:f.searchParam.title,"onUpdate:modelValue":b[0]||(b[0]=v=>f.searchParam.title=v),size:"default",style:{width:"300px"},onKeyup:re(h,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-top":"8px"}},{default:a(()=>[l(m,{span:2,class:"search-label"},{default:a(()=>[c("등록일자")]),_:1}),l(m,{span:5,style:{"max-width":"350px","margin-right":"20px"}},{default:a(()=>[l(y,{modelValue:i.value,"onUpdate:modelValue":b[1]||(b[1]=v=>i.value=v),type:"daterange","range-separator":"~","value-format":"YYYY.MM.DD",onChange:h,style:{"max-width":"300px"},clearable:!1},null,8,["modelValue"])]),_:1}),l(m,{span:2,class:"search-label"},{default:a(()=>[c("게시여부")]),_:1}),l(m,{span:5},{default:a(()=>[l(R,{modelValue:f.searchParam.postYn,"onUpdate:modelValue":b[2]||(b[2]=v=>f.searchParam.postYn=v),placeholder:"전체",onChange:h,style:{width:"150px"}},{default:a(()=>[(M(),F(L,null,E(Y,v=>l(N,{key:v.value,label:v.label,value:v.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(m,{span:7})]),_:1})]),r("div",Ge,[l(I,{class:"searchbox-button",round:"",onClick:D},{default:a(()=>[c("초기화")]),_:1}),l(I,{class:"searchbox-button mt-2",round:"",onClick:h},{default:a(()=>[c("조회")]),_:1})])])}}}),Ke=B({__name:"PopupManagement",setup(x){const{loadStart:C,loadDone:f}=me(),S=u({title:"",fromCreatedAt:null,toCreatedAt:null,postYn:""}),_=u({pageNo:1,rowCnt:20}),i=u(null),Y=u(),D=()=>{C(Y.value.gridRef);const g={...S.value,..._.value};console.log("param",g),G.getPopupList(g).then(d=>{console.log("res",d.data),i.value=d.data}),f()},h=g=>{G.deletePopupList({deleteList:g}).then(d=>{m(d.data)})},e=()=>{D()},b=()=>{D()},m=g=>{let d="";g.saveStatus?d="삭제하였습니다.":d=g.message||"Error",A.alert(d,"알림",{confirmButtonText:"확인"}).then(()=>{g.saveStatus&&(_.value.pageNo=1,D())}).catch(y=>{alert.error(y)})};return fe(()=>{D()}),(g,d)=>(M(),F(L,null,[l(Be,{searchParam:S.value,onGetSearchList:e},null,8,["searchParam"]),l(Te,{ref_key:"popupGridRef",ref:Y,data:i.value,pageParam:_.value,onChangePage:b,onGetDeleteList:h},null,8,["data","pageParam"])],64))}});export{Ke as default};
