import{C as ne,d as O,A as b,L as B,h as q,w as _,j as oe,a as I,i as e,e as r,f as R,I as te,X as ae,E as J,t as X,u as z,_ as $,U as se,b as Y,x as K,Y as ue,m as de,s as re,F as k,r as C,q as ce,o as ie,J as E,v as G}from"./index-DvlLjNFd.js";/* empty css                  *//* empty css                 *//* empty css                  */import"./el-form-item-l0sNRNKZ.js";import{P as S}from"./menuService-EopF3asC.js";const me="YYYY-MM-DD";function pe(m,P=me){return ne(m).format(P)}const _e=m=>(X("data-v-4e22ed34"),m=m(),z(),m),ge={class:"grid-box"},ve={class:"grid-header-box"},he=_e(()=>e("p",{class:"menu-alin-left",style:{"margin-top":"5px"}},"메뉴",-1)),be={class:"button-box"},fe=40,Pe=O({__name:"MenuRoleLeftTree",props:{menuTreeProp:{type:Object,default:null}},emits:["menuParam","menuAddTreeParam"],setup(m,{emit:P}){let g=pe();const v=m,u={children:"children",label:"label"},p=b(),U=b(),y=P,t=b({id:null,menuName:null,menuDesc:"",menuType:"",menuUrl:"",menuIncludeType:"",pageId:"",useYn:"",mobileUseYn:"",upMenuId:"",menuLevel:null,menuIcon:"",mobilePageUrl:"",delYn:"",children:[]}),n=l=>{if(l.value==null)l();else{const s={id:t.value.id,menuName:t.value.menuName,menuDesc:t.value.menuDesc,menuType:t.value.menuType,menuUrl:t.value.menuUrl,menuIncludeType:t.value.menuIncludeType,pageId:t.value.pageId,useYn:t.value.useYn,mobileUseYn:t.value.mobileUseYn,upMenuId:t.value.upMenuId,menuLevel:t.value.menuLevel,menuIcon:t.value.menuIcon,delYn:t.value.delYn,mobilePageUrl:t.value.mobilePageUrl,children:t.value.children};console.log("menuParam",s),y("menuParam",s)}},L=()=>{const l={};console.log("menuParam",l),y("menuParam",l)},V=()=>{p.value=v.menuTreeProp,console.log("menuDataSource",p.value)},A=(l,s)=>{console.log("drag start",l)},T=(l,s,i)=>{console.log("tree drag enter:",s.label)},d=(l,s,i)=>{console.log("tree drag leave:",s.label)},w=(l,s,i)=>{console.log("tree drag over:",s.label)},N=(l,s,i,M)=>{console.log("tree drag end:",s&&s.label,i)},a=(l,s,i,M)=>{console.log("tree drop:",s.label,i)};B([()=>v.menuTreeProp],()=>{V()});const c=l=>{console.log("onClickTree  :: ",l),t.value=l,n(t)},x=l=>{l.children!==null?U.value.setCheckedNodes(l.children,!1):U.value.setCheckedNodes([l[0],!1])},o=l=>{console.log("onNodeClick ::,   ",l),c(l),x(l)},h=(l,{node:s,data:i,store:M})=>l("span",{class:"custom-tree-node"},l("span",null,s.label),l("span",null,l("span",{onClick:()=>c(i)},l("span",i.menuName))),l("span",null,l("a",{onClick:()=>c(i)},l("span","")))),H=()=>{console.log("save ::  ",p.value),y("menuAddTreeParam",p.value)},Q=(l,s)=>(console.log("data.children"),l?s.label.indexOf(l)!==-1:!0);let F=1e3;const W=l=>{l||(l.children=[]);let s=j(p.value,0),i={children:[],createdAt:"",createdId:null,delYn:"N",id:"insert-"+F++,menuDesc:"",menuIcon:null,menuLevel:1,menuName:"메뉴추가-"+s+F++,menuType:"PAGE",menuUrl:"",mobilePageUrl:null,mobileUseYn:"N",orderNo:"",page:null,pageId:null,upMenuId:null,updatedAt:"",updatedId:"",useYn:"Y",insertMod:"Y"};c(i),p.value.push(i)};let Z=1,ee=1;const le=()=>{if(!t.value)return;t.value.children||(t.value.children=[]);let l=j(t.value,0),s={children:[],createdAt:"",createdId:null,delYn:"N",id:"insert-"+g+Z+++"-"+l,menuDesc:"",menuIcon:null,menuLevel:t.value.menuLevel+1,menuName:"메뉴추가-"+l+ee++,menuType:"PAGE",menuUrl:"",mobilePageUrl:null,mobileUseYn:"N",orderNo:"",page:null,pageId:null,upMenuId:null,updatedAt:"",updatedId:"",useYn:"Y",insertMod:"Y"};t.value.children.push(s),t.value.children?o(s):L(),s=null},j=(l,s)=>{let i=l.length,M=null;console.log("currentSelectId :: ",t.value.id),p.value&&t.value.id&&(M=t.value.id);for(let D=0;D<i;D++)l[D].id.search("insert")!=-1&&s++,l[D].children&&l[D].children.length>0&&(s=j(l[D].children,s)),M==l[D].id&&console.log("선택해놓은 아이템 : ",l[D].menuName);return s};return(l,s)=>{const i=J,M=oe;return I(),q(M,{height:"90%"},{default:_(()=>[e("div",ge,[e("div",ve,[he,e("div",be,[r(i,{class:"basic-button flex justify-end",round:"",onClick:W},{default:_(()=>[R("Node 추가")]),_:1}),r(i,{class:"basic-button flex justify-end",round:"",onClick:le},{default:_(()=>[R("Child Node추가")]),_:1}),r(i,{class:"basic-button flex justify-end",round:"",onClick:H},{default:_(()=>[R(" 저장")]),_:1})])]),r(te(ae),{style:{"min-width":"400px"},data:p.value,draggable:"",onNodeDragStart:A,onNodeDragEnter:T,onNodeDragLeave:d,onNodeDragOver:w,onNodeDragEnd:N,onNodeDrop:a,"show-checkbox":"","node-key":"id","default-expand":"false","render-content":h,onNodeClick:o,"filter-node-method":Q,"expand-on-click-node":!0,props:u,indent:fe,ref_key:"treeRef",ref:U},null,8,["data"])])]),_:1})}}}),xe=$(Pe,[["__scopeId","data-v-4e22ed34"]]),f=m=>(X("data-v-9a3f766a"),m=m(),z(),m),Ie={class:"grid-box"},ye={class:"grid-header-box"},Te={class:"menu-alin-left",style:{"margin-top":"5px"}},Ne={class:"myForm"},De={class:"line_form"},Ue={class:"line_bottom"},Me={class:"column"},Ye={class:"input-group",style:{height:"38px"}},Le=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 메뉴ID ",-1)),Ve={class:"line_bottom"},Ae={class:"column"},we={class:"input-group"},ke=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 메뉴명 ",-1)),Ce={class:"line_bottom"},Ee={class:"column"},Re={class:"input-group"},Se=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 메뉴타입",-1)),je={class:"input-group-item"},Be={class:"line_bottom"},Oe={class:"column"},$e={class:"input-group"},Fe=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 메뉴설명",-1)),Ke={class:"input-group-item"},Ge={class:"line_bottom"},qe={class:"column"},Je={class:"input-group"},Xe=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 메뉴URL ",-1)),ze={class:"input-group-item",style:{width:"300px"}},He={class:"line_bottom"},Qe={class:"column"},We={class:"input-group"},Ze=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 페이지",-1)),el={class:"input-group-item"},ll={class:"line_bottom"},nl={class:"column"},ol={class:"input-group"},tl=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 사용여부",-1)),al={class:"input-group-item"},sl={class:"line_bottom"},ul={class:"column"},dl={class:"input-group"},rl=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 모바일여부",-1)),cl={class:"input-group-item"},il={class:"line_bottom"},ml={class:"column"},pl={class:"input-group"},_l=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 메뉴포함구분",-1)),gl={class:"input-group-item"},vl={class:"line_bottom"},hl={class:"column"},bl={class:"input-group"},fl=f(()=>e("label",{for:"customer_name",class:"form_label_text"}," 모바일페이지URL ",-1)),Pl={class:"input-group-item",style:{width:"300px"}},xl=O({__name:"MenuRoleRightInfo",props:{menuDataProp:{type:Object,default:null},menuPageIdProp:{type:Object,default:null}},emits:["updateMenuParam"],setup(m,{emit:P}){const g=P,v=b(),u=m,p=[{value:"",label:"전체",text:"전체"},{value:"PAGE",label:"PAGE",text:"PAGE"},{value:"LINK",label:"LINK",text:"LINK"}],U=[{value:"",label:"전체",text:"전체"},{value:"Y",label:"사용",text:"사용"},{value:"N",label:"사용안함",text:"사용안함"}],y=[{value:"",label:"전체",text:"전체"},{value:"Y",label:"사용",text:"사용"},{value:"N",label:"사용안함",text:"사용안함"}],t=[{value:"A",label:"전체",text:"전체"},{value:"C",label:"사업장",text:"사업장"},{value:"P",label:"개인",text:"개인"}],n=se({id:null,menuName:null,menuType:null,menuDesc:null,menuUrl:null,pageId:null,mobileUseYn:null,useYn:null,menuIncludeType:null,mobilePageUrl:null,menuLevel:null,menuIcon:null,upMenuId:null});B(()=>u.menuDataProp,()=>{V()}),B(()=>u.menuPageIdProp,()=>{A()});const L=()=>{console.log(" menuRole.menuName ::  ",n.menuName);const T={id:n.id,menuName:n.menuName,menuType:n.menuType,menuDesc:n.menuDesc,menuUrl:n.menuUrl,pageId:n.pageId,mobileUseYn:n.mobileUseYn,useYn:n.useYn,menuIncludeType:n.menuIncludeType,mobilePageUrl:n.mobilePageUrl,menuLevel:n.menuLevel,menuIcon:n.menuIcon};console.log("updateMenuParam ::  ",T),g("updateMenuParam",T)},V=()=>{n.id=u.menuDataProp.id,n.menuName=u.menuDataProp.menuName,n.menuType=u.menuDataProp.menuType,n.menuDesc=u.menuDataProp.menuDesc,n.menuUrl=u.menuDataProp.menuUrl,n.pageId=u.menuDataProp.pageId,n.mobileUseYn=u.menuDataProp.mobileUseYn,n.useYn=u.menuDataProp.useYn,n.menuIncludeType=u.menuDataProp.menuIncludeType,n.mobilePageUrl=u.menuDataProp.mobilePageUrl,n.menuLevel=u.menuDataProp.menuLevel,n.menuIcon=u.menuDataProp.menuIcon,console.log("menuProps ::  ",u.menuDataProp)},A=()=>{console.log("menuProps.menuPageIdProp 1 :: ",u.menuPageIdProp),v.value=u.menuPageIdProp};return(T,d)=>{const w=J,N=ue,a=de,c=ce,x=re;return I(),Y("div",Ie,[e("div",ye,[e("p",Te,K(n.menuName),1),r(w,{class:"basic-button flex justify-end",round:"",onClick:L},{default:_(()=>[R("저장")]),_:1})]),e("div",Ne,[e("div",De,[e("div",Ue,[e("div",Me,[e("div",Ye,[Le,r(N,{style:{height:"30px",width:"300px","margin-top":"4px","margin-left":"8px"}},{default:_(()=>[R(K(n.id),1)]),_:1})])])])]),e("div",Ve,[e("div",Ae,[e("div",we,[ke,r(a,{modelValue:n.menuName,"onUpdate:modelValue":d[0]||(d[0]=o=>n.menuName=o),style:{height:"30px",width:"300px","margin-top":"4px"},placeholder:"input title"},null,8,["modelValue"])])])]),e("div",Ce,[e("div",Ee,[e("div",Re,[Se,e("div",je,[r(x,{modelValue:n.menuType,"onUpdate:modelValue":d[1]||(d[1]=o=>n.menuType=o),placeholder:"전체",style:{height:"24px",width:"150px","margin-top":"2px"},clearable:""},{default:_(()=>[(I(),Y(k,null,C(p,o=>r(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])])]),e("div",Be,[e("div",Oe,[e("div",$e,[Fe,e("div",Ke,[r(a,{modelValue:n.menuDesc,"onUpdate:modelValue":d[2]||(d[2]=o=>n.menuDesc=o),style:{height:"30px",width:"300px","margin-top":"4px"},placeholder:"File Name"},null,8,["modelValue"])])])])]),e("div",Ge,[e("div",qe,[e("div",Je,[Xe,e("div",ze,[r(a,{modelValue:n.menuUrl,"onUpdate:modelValue":d[3]||(d[3]=o=>n.menuUrl=o),style:{height:"30px","margin-top":"4px",width:"300px"},placeholder:"input image"},null,8,["modelValue"])])])])]),e("div",He,[e("div",Qe,[e("div",We,[Ze,e("div",el,[r(x,{modelValue:n.pageId,"onUpdate:modelValue":d[4]||(d[4]=o=>n.pageId=o),placeholder:"전체",style:{height:"24px",width:"300px","margin-top":"2px"},clearable:""},{default:_(()=>[(I(!0),Y(k,null,C(v.value,o=>(I(),q(c,{key:o.id,label:o.pageName,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])]),e("div",ll,[e("div",nl,[e("div",ol,[tl,e("div",al,[r(x,{modelValue:n.useYn,"onUpdate:modelValue":d[5]||(d[5]=o=>n.useYn=o),placeholder:"전체",style:{height:"24px",width:"150px","margin-top":"2px"},clearable:""},{default:_(()=>[(I(),Y(k,null,C(y,o=>r(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])])]),e("div",sl,[e("div",ul,[e("div",dl,[rl,e("div",cl,[r(x,{modelValue:n.mobileUseYn,"onUpdate:modelValue":d[6]||(d[6]=o=>n.mobileUseYn=o),placeholder:"전체",style:{height:"24px",width:"150px","margin-top":"2px"},clearable:""},{default:_(()=>[(I(),Y(k,null,C(U,o=>r(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])])]),e("div",il,[e("div",ml,[e("div",pl,[_l,e("div",gl,[r(x,{modelValue:n.menuIncludeType,"onUpdate:modelValue":d[7]||(d[7]=o=>n.menuIncludeType=o),placeholder:"전체",style:{height:"24px",width:"150px","margin-top":"2px"},clearable:""},{default:_(()=>[(I(),Y(k,null,C(t,o=>r(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])])]),e("div",vl,[e("div",hl,[e("div",bl,[fl,e("div",Pl,[r(a,{modelValue:n.mobilePageUrl,"onUpdate:modelValue":d[8]||(d[8]=o=>n.mobilePageUrl=o),style:{height:"30px","margin-top":"4px",width:"300px"},placeholder:"input image"},null,8,["modelValue"])])])])])])])}}}),Il=$(xl,[["__scopeId","data-v-9a3f766a"]]),yl={style:{display:"flex"}},Tl={class:"margin-width30-left"},Nl={class:"margin-width70-right"},Dl=O({__name:"menuRoleManage",setup(m){const P=b(),g=b(),v=b(),u=b(),p=b(),U=b(!1);ie(()=>{y(),L()});const y=()=>{S.getPageListAll().then(a=>{p.value=a.data})},t=()=>{U.value=!1,G.confirm("저장 하시겠습니까?","info",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"info"}).then(()=>{n()}).catch(()=>{})},n=()=>{console.log("menuTreeParam.value::: ",v.value);let a={menuInfo:v.value};S.setMenuSaveInfo(a).then(c=>{c.data?(E.success("success successfully"),N()):(E.warning(c.data.message),N())})},L=()=>{S.getMenuListAll().then(a=>{a.data&&(u.value=a.data,T(u.value[0]))})},V=(a,c,x)=>{let o=a.length;for(let h=0;h<o;h++)a[h].menuLevel=c,a[h].upMenuId=x,a[h].children&&a[h].children.length>0&&V(a[h].children,c+1,a[h].id)},A=()=>{V(g.value,1,null),G.confirm("저장 하시겠습니까?","info",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"info",center:!0}).then(()=>{console.log("menuTreeAddParam.value :: ",g.value);let a={menuList:g.value};S.setMenuSaveListAll(a).then(c=>{c.data?(E.success("success successfully"),N()):(E.warning(c.data.message),N())})}).catch(()=>{})},T=a=>{P.value=a,console.log("menuTreeParam.value  :: :",P.value)},d=a=>{if(g.value=a,console.log("menuAddTreeParam.value 22222 :: :",g.value),g.value)A();else{E.warning("저장할 데이터가 없습니다.");return}},w=a=>{v.value=a,console.log("menuRightTreeParam.value :::    ",v.value),t()},N=()=>{y(),L()};return(a,c)=>(I(),Y("div",yl,[e("div",Tl,[r(xe,{onMenuParam:T,onMenuAddTreeParam:d,menuTreeProp:u.value},null,8,["menuTreeProp"])]),e("div",Nl,[r(Il,{onUpdateMenuParam:w,menuDataProp:P.value,menuPageIdProp:p.value},null,8,["menuDataProp","menuPageIdProp"])])]))}}),wl=$(Dl,[["__scopeId","data-v-afbe1444"]]);export{wl as default};
