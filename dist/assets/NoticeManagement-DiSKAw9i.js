import{p as W,g as ce,d as B,C as J,A as i,a as w,h as Q,w as r,i as e,e as o,f as N,b as k,r as $,F as V,E as G,s as X,m as le,H as ae,k as oe,t as ne,u as se,v as L,J as U,q as Z,_ as z,L as ie,x as ee,P as de,Q as re,R as ue,c as pe,n as me,S as _e,l as ve,T as fe,o as he}from"./index-DvlLjNFd.js";/* empty css                  *//* empty css                 *//* empty css                  */import{d as te}from"./el-date-picker-DV7JN7Bd.js";/* empty css               */import{_ as ge}from"./index.vue_vue_type_script_setup_true_lang-DrjQ59DJ.js";import{E as xe}from"./Editor-CkC8gw3A.js";const j="admin/notice",be=j+"/list",ye=j+"/detail",we=j+"/save",Ce=j+"/delete",De=c=>W(be,c),Ne=c=>ce(ye,c),Pe=(c,v)=>W(we,c,v),ke=c=>W(Ce,c),Se={getNoticeList:De,getNoticeDetail:Ne,saveNotice:Pe,deleteNoticeList:ke},O=Se,S=c=>(ne("data-v-0079bdec"),c=c(),se(),c),Ye={class:"modal-box"},Le=S(()=>e("hr",null,null,-1)),Ve={class:"flex justify-end my-3"},Ie={class:"myForm"},Re={class:"row"},Ee={class:"line_form"},Me={class:"line_bottom"},Te={class:"column"},Ae={class:"input-group"},$e=S(()=>e("label",{for:"customer_name",class:"form_label_text"}," 공지사항 구분",-1)),Oe={class:"input-group-item"},Fe={class:"input-group"},Ue=S(()=>e("label",{for:"customer_name",class:"form_label_text",style:{"text-align":"center"}}," New Icon 표시 ",-1)),Be={class:"input-group-item"},Ge={class:"column"},ze={class:"line_bottom"},je={class:"input-group"},Ke=S(()=>e("label",{for:"customer_name",class:"form_label_text"},"제목",-1)),He={class:"input-group-item",style:{width:"90%"}},qe={class:"column"},We={class:"line_bottom"},Je={class:"input-group"},Qe=S(()=>e("label",{for:"customer_name",class:"form_label_edit_text"},"내용",-1)),Xe={class:"column"},Ze={class:"line_bottom"},et={class:"input-group"},tt=S(()=>e("label",{for:"customer_name",class:"form_label_text"}," 팝업 게시여부",-1)),lt={class:"input-group-item"},at={class:"column"},ot={class:"line_bottom"},nt={class:"input-group"},st=S(()=>e("label",{for:"customer_name",class:"form_label_text"},"팝업 게시일자",-1)),it={class:"input-group-item"},ct={class:"column"},dt={class:"line_bottom"},rt={class:"input-group"},ut=S(()=>e("label",{for:"customer_name",class:"form_label_text"}," 관련 링크",-1)),pt={class:"input-group-item",style:{width:"90%"}},mt={class:"column"},_t={class:"line_bottom"},vt={class:"input-group"},ft=S(()=>e("label",{for:"customer_name",class:"form_label_text"}," 첨부파일",-1)),ht={class:"input-group-item"},gt={class:"input-group-item"},xt=B({__name:"NoticeDetailPopup",emits:["onSearchDataReload"],setup(c,{expose:v,emit:P}){const d=J(new Date),u=i([d.add(-1,"month").format("YYYY.MM.DD"),d.format("YYYY.MM.DD")]);i({fromAt:u.value[0],toAt:u.value[1]});const h=[{value:"Y",label:"표시"},{value:"N",label:"표시안함"}],s=[{value:"info",label:"안내"},{value:"maintenance",label:"점검"}],C=[{value:"always",label:"항상"},{value:"day",label:"하루"},{value:"no",label:"표시안함"}];i({type:"msg",title:"알람",message:"입력해 주세요."}),i({type:"msg",title:"알람",message:"필수 입력 항목입니댜."});const y=P,g=i(),D=i(null),_=i(null),p=i(!1),t=i({small:"small",viewerText:null,id:null,type:null,typeName:null,newIconType:null,title:null,content:null,postYn:null,postStartAt:null,postEndAt:null,relatedLink:null,fileGroupId:null,fileName:null,oriFileName:null,selectFile:null,fileId:null,from:null,to:null,contents:null,saveMode:null}),f=()=>{if(!t.value){let n="";n="저장할 데이터가 없습니다.",L.alert(n,"알림",{confirmButtonText:"확인"});return}if(t.value.type==null){L.alert("필수 입력 항목입니댜.","알림",{confirmButtonText:"확인"});return}else if(t.value.newIconType==null){L.alert("필수 입력 항목입니댜.","알림",{confirmButtonText:"확인"});return}else if(t.value.title==null){L.alert("필수 입력 항목입니댜.","알림",{confirmButtonText:"확인"});return}},x=()=>{f();const n=new FormData;n.append("uploadFile",t.value.selectFile),n.append("saveMode",t.value.saveMode),n.append("id",t.value.id),n.append("type",t.value.type),n.append("newIconType",t.value.newIconType),n.append("title",t.value.title),n.append("content",t.value.content),n.append("postYn",t.value.postYn),n.append("postStartAt",u[0].split("/").join("")),n.append("postEndAt",u[1].split("/").join("")),n.append("relatedLink",t.value.relatedLink),n.append("oriFileName",t.value.oriFileName),n.append("fileGroupId",t.value.fileGroupId),n.append("fileId",t.value.fileId);const l={headers:{"Content-Type":"multipart/form-data"}};L.confirm("저장 하시겠습니까?","info",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"info",center:!0}).then(()=>{O.saveNotice(n,l).then(m=>{m.data?(U.success("success successfully"),M()):(U.warning(m.data.message),M())})}).catch(()=>{})},Y=()=>{const n={id:t.value.id};O.getNoticeDetail(n).then(l=>{t.value=l.data,t.value.type=l.data.type,t.value.newIconType=l.data.newIconType,t.value.title=l.data.title,t.value.content=l.data.content,t.value.postYn=l.data.postYn,u[0]=l.data.postStartAt,u[1]=l.data.postEndAt,t.value.relatedLink=l.data.relatedLink==="null"?"":l.data.relatedLink,t.value.oriFileName=l.data.oriFileName,t.value.fileGroupId=l.data.fileGroupId,t.value.fileId=l.data.fileId,t.value.fileName=l.data.oriFileName,g.value.setEditContent(l.data.content)})},E=n=>{console.log("id:   ",n),n==null?(p.value=!0,t.value={},g.value.setEditContent("")):(p.value=!0,t.value.id=n,Y())},I=()=>{t.value.id==null?t.value.saveMode="insert":t.value.saveMode="update",g.value.getEditContent()},b=n=>{t.value.content=n,n==null&&(t.value.content=""),x()},M=()=>{y("onSearchDataReload"),p.value=!1},F=()=>{D.value.click()},K=n=>{_.value=n.target.files[0],t.value.oriFileName=n.target.files[0].name};return v({open:E}),(n,l)=>{const m=G,R=Z,T=X,A=le,H=ae,q=oe;return w(),Q(q,{modelValue:p.value,"onUpdate:modelValue":l[7]||(l[7]=a=>p.value=a),"align-center":"",class:"modal-title min-w-[900px] min-h-[700px]",title:"공지사항상세"},{default:r(()=>[e("div",Ye,[Le,e("div",Ve,[o(m,{class:"basic-button",onClick:I},{default:r(()=>[N("저장")]),_:1})]),e("div",Ie,[e("div",Re,[e("div",Ee,[e("div",Me,[e("div",Te,[e("div",Ae,[$e,e("div",Oe,[o(T,{modelValue:t.value.type,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value.type=a),style:{height:"24px",width:"240px","margin-top":"2px"},clearable:""},{default:r(()=>[(w(),k(V,null,$(s,a=>o(R,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),e("div",Fe,[Ue,e("div",Be,[o(T,{modelValue:t.value.newIconType,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.newIconType=a),style:{height:"24px",width:"240px","margin-top":"2px"},clearable:""},{default:r(()=>[(w(),k(V,null,$(C,a=>o(R,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])])]),e("div",Ge,[e("div",ze,[e("div",je,[Ke,e("div",He,[o(A,{modelValue:t.value.title,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.title=a),placeholder:"input title",style:{height:"30px","margin-top":"4px"},clearable:""},null,8,["modelValue"])])])])]),e("div",qe,[e("div",We,[e("div",Je,[Qe,o(xe,{ref_key:"editorRef",ref:g,onOnEditContent:b},null,512)])])]),e("div",Xe,[e("div",Ze,[e("div",et,[tt,e("div",lt,[o(T,{modelValue:t.value.postYn,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.postYn=a),placeholder:"전체",style:{height:"24px",width:"240px","margin-top":"2px"},clearable:""},{default:r(()=>[(w(),k(V,null,$(h,a=>o(R,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])]),e("div",at,[e("div",ot,[e("div",nt,[st,e("div",it,[o(H,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value=a),type:"daterange","range-separator":"~","value-format":"YYYY.MM.DD",style:{"max-width":"300px",height:"30px",width:"240px","margin-top":"4px"}},null,8,["modelValue"])])])])])]),e("div",ct,[e("div",dt,[e("div",rt,[ut,e("div",pt,[o(A,{modelValue:t.value.relatedLink,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.relatedLink=a),style:{height:"30px","margin-top":"4px"},placeholder:"input link"},null,8,["modelValue"])])])])]),e("div",mt,[e("div",_t,[e("div",vt,[ft,e("div",ht,[o(A,{modelValue:t.value.oriFileName,"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.oriFileName=a),"input-style":{fontSize:"12px"},disabled:""},null,8,["modelValue"])]),e("div",gt,[o(m,{style:{"background-color":"#0055d4",color:"white",height:"30px","font-weight":"700","font-size":"13px","line-height":"18.82px","margin-top":"4px","margin-left":"4px",width:"60px"},onClick:F},{default:r(()=>[N("파일선택")]),_:1})]),e("input",{ref_key:"fileRef",ref:D,type:"file",accept:"image/*",onChange:K,style:{display:"none"}},null,544)])])])])])])])]),_:1},8,["modelValue"])}}}),bt=z(xt,[["__scopeId","data-v-0079bdec"]]),yt={name:"NotiocePreviewPopup",components:{},data(){return{previewDetailPopupOpened:!1,id:null,content:null}},computed:{},methods:{getNoticeDetailApi(){const c={id:this.id};O.getNoticeDetail(c).then(v=>{v.data&&v.data.content?this.content=v.data.content:this.content=null})},open(c){this.id=c,this.getNoticeDetailApi(),this.previewDetailPopupOpened=!0}}},wt=c=>(ne("data-v-c6c17f58"),c=c(),se(),c),Ct={class:"wrap",style:{"min-width":"980px","min-height":"780px"}},Dt=wt(()=>e("div",{class:"row"},[e("div",{class:"column"},[e("span",{class:"popup-title"},"미리보기")])],-1)),Nt={class:"myForm",style:{"margin-top":"10px"}},Pt={class:"line_form"},kt=["innerHTML"];function St(c,v,P,d,u,h){const s=oe;return w(),Q(s,{modelValue:u.previewDetailPopupOpened,"onUpdate:modelValue":v[0]||(v[0]=C=>u.previewDetailPopupOpened=C),style:{"min-width":"1050px","min-height":"700px"}},{default:r(()=>[e("div",Ct,[Dt,e("div",Nt,[e("div",Pt,[e("div",{innerHTML:u.content,style:{"margin-top":"10px"}},null,8,kt)])])])]),_:1},8,["modelValue"])}const Yt=z(yt,[["render",St],["__scopeId","data-v-c6c17f58"]]),Lt={name:"NoticePreviewBtnRender",data:function(){return{cellValue:null}}};function Vt(c,v,P,d,u,h){const s=G;return w(),k("span",null,[o(s,{style:{"background-color":"#0055d4",color:"white"},size:"small"},{default:r(()=>[N("미리보기")]),_:1})])}const It=z(Lt,[["render",Vt]]),Rt={class:"button-box grid-header-box"},Et={class:"grid-box flex flex-col flex-1"},Mt={class:"flex"},Tt={class:"total-page-label"},At={class:"data-grid-large-box"},$t="미리보기",Ot=B({__name:"NoticeManageGrid",props:{data:{type:Object,inheritAttrs:!0},pageParam:{type:Object}},emits:["pageChange","delIdList"],setup(c,{expose:v,emit:P}){const d=i(null),u=i(null),h=i(),s=c,C=i([]),y=i(null),g=i(null),D=i([{width:80,headerCheckboxSelection:!0,checkboxSelection:!0,editable:!0,headerCheckboxSelectionFilteredOnly:!0,showDisabledCheckboxes:!0},{field:"id",headerName:"번호",headerClass:"centered",cellClass:"centered",width:100,cellStyle:{textAlign:"center",width:100,filter:"text",sortable:!0}},{field:"typeName",headerName:"구분",headerClass:"centered",cellClass:"centered",width:150,cellStyle:{textAlign:"center",width:150,filter:"text",sortable:!0}},{field:"title",headerName:"제목",headerClass:"centered",cellClass:"cell-link",width:650,cellStyle:{width:650,filter:"text",textDecoration:"underline",cursor:"pointer",sortable:!0}},{field:"postYn",headerName:"게시여부",headerClass:"centered",cellClass:"centered",width:100,cellStyle:{textAlign:"center",width:100,filter:"text",sortable:!0}},{field:"postStartAt",headerName:"게시시작일",headerClass:"centered",cellClass:"centered",valueFormatter:l=>te(l),cellStyle:{textAlign:"center",width:150,filter:"text",sortable:!0}},{field:"postEndAt",headerName:"게시종료일",headerClass:"centered",cellClass:"centered",valueFormatter:l=>te(l),cellStyle:{textAlign:"center",width:150,filter:"text",sortable:!0}},{field:$t,headerName:"미리보기",headerClass:"centered",cellClass:"centered",width:120,editable:!1,cellRenderer:It,minWidth:120,cellStyle:{textAlign:"center",width:120,sortable:!1}}]),_=i(0),p=P,t=i(0),f=i(0),x=i(0),Y=[{value:10,label:"10개씩"},{value:20,label:"20개씩"},{value:30,label:"30개씩"},{value:50,label:"50개씩"},{value:100,label:"100개씩"}];ie(s,()=>{E()});const E=()=>{var l,m;_.value=Number((l=s.data)==null?void 0:l.totalElements),f.value=s.pageParam.pageNo*s.pageParam.rowCnt,t.value=f.value-(s.pageParam.rowCnt-1),f.value>_.value&&(f.value=_.value),x.value=s.pageParam.rowCnt,C.value=(m=s.data)==null?void 0:m.noticeList},I=l=>{y.value=l==null?void 0:l.api,g.value="fitGridWidth"},b=()=>{const l=y.value.getSelectedRows(),m=l;console.log("selectedCheckedRows",l),p("delIdList",m)},M=()=>{s.pageParam.rowCnt=x.value,p("pageChange",s.pageParam)},F=()=>{s.pageParam.pageNo=1,s.pageParam.rowCnt=x.value,p("pageChange",s.pageParam)},K=l=>{console.log("event.colDef.field ::  ",l.data.id),l.colDef.field==="title"?d.value.open(l.data.id):l.colDef.field==="미리보기"?u.value.open(l.data.id):console.log(" :: Cell Click : ")},n=()=>{d.value.open()};return v({gridRef:h}),(l,m)=>{const R=G,T=Z,A=X,H=ge,q=ue;return w(),k(V,null,[e("div",{ref_key:"gridRef",ref:h,class:"grid-box flex flex-col flex-1 mt-5 h-full min-w-[1200px]"},[e("div",Rt,[o(R,{class:"basic-button",round:"",onClick:n},{default:r(()=>[N("등록")]),_:1}),o(R,{class:"basic-button",round:"",onClick:b},{default:r(()=>[N("삭제")]),_:1})]),e("div",Et,[e("div",Mt,[o(A,{placeholder:"20개씩",style:{width:"100px",margin:"15px 5px 0px 20px"},modelValue:x.value,"onUpdate:modelValue":m[0]||(m[0]=a=>x.value=a),onChange:F},{default:r(()=>[(w(),k(V,null,$(Y,a=>o(T,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e("div",Tt,ee(`전체 ${_.value}개 중`),1),de(e("div",{class:"current-pagerange-label"},ee(`${t.value}~${f.value}개`),513),[[re,_.value!==0]])]),e("div",At,[o(H,{ref:"noticeGridRef",style:{height:"520px"},rowSelection:"multiple",class:"ag-theme-quartz px-5 pt-[10px] h-full",rowData:C.value,columnDefs:D.value,onOnGridReady:I,onOnGridCellClick:K},null,8,["rowData","columnDefs"])]),o(q,{class:"footer-pagination","current-page":s.pageParam.pageNo,"onUpdate:currentPage":m[1]||(m[1]=a=>s.pageParam.pageNo=a),"page-size":x.value,"onUpdate:pageSize":m[2]||(m[2]=a=>x.value=a),total:_.value,"onUpdate:total":m[3]||(m[3]=a=>_.value=a),"page-sizes":[10,20,30,50,100],layout:" prev, pager, next",onSizeChange:M,onCurrentChange:M},null,8,["current-page","page-size","total"])])],512),o(bt,{ref_key:"noticeDetailPopRef",ref:d,onOnSearchDataReload:F},null,512),o(Yt,{ref_key:"noticePreviewPopRef",ref:u},null,512)],64)}}}),Ft=z(Ot,[["__scopeId","data-v-1edcb9d6"]]),Ut={class:"searchbox-box"},Bt=B({__name:"NoticeManageSearch",props:{searchParam:{type:Object}},emits:["getSearchList"],setup(c,{emit:v}){const P=v;i("");const d=c,u=[{value:"Y",label:"게시"},{value:"N",label:"게시안함"}],h=J(new Date),s=i([h.add(-1,"month").format("YYYY.MM.DD"),h.format("YYYY.MM.DD")]),C=pe(()=>u);ie(s,D=>{d.searchParam.fromAt=D[0],d.searchParam.toAt=D[1]});const y=()=>{console.log("props.searchParam :::  ",d.searchParam),P("getSearchList",d.searchParam)},g=()=>{d.searchParam.dateSts="",d.searchParam.postYn="",d.searchParam.title=null,s.value=[h.add(-1,"month").format("YYYY.MM.DD"),h.format("YYYY.MM.DD")],y()};return(D,_)=>{const p=ve,t=le,f=me,x=ae,Y=Z,E=X,I=G;return w(),k("div",Ut,[e("div",null,[o(f,null,{default:r(()=>[o(p,{span:3,class:"search-label min-w-[120px]"},{default:r(()=>[N("제목")]),_:1}),o(p,{span:5},{default:r(()=>[o(t,{modelValue:d.searchParam.title,"onUpdate:modelValue":_[0]||(_[0]=b=>d.searchParam.title=b),size:"default",placeholder:"",style:{width:"300px"},onKeyup:_e(y,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),o(f,{style:{"margin-top":"8px"}},{default:r(()=>[o(p,{span:3,class:"search-label min-w-[120px]"},{default:r(()=>[N("등록일자")]),_:1}),o(p,{span:5,style:{"max-width":"350px","margin-right":"20px"}},{default:r(()=>[o(x,{modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=b=>s.value=b),type:"daterange","range-separator":"~","value-format":"YYYY.MM.DD",onChange:y,style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),o(p,{span:3,class:"search-label min-w-[120px]"},{default:r(()=>[N("게시여부")]),_:1}),o(p,{span:5},{default:r(()=>[o(E,{modelValue:d.searchParam.postYn,"onUpdate:modelValue":_[2]||(_[2]=b=>d.searchParam.postYn=b),placeholder:"전체",clearable:"",onChange:y,style:{width:"250px"}},{default:r(()=>[(w(!0),k(V,null,$(C.value,b=>(w(),Q(Y,{key:b.value,label:b.label,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{span:7})]),_:1})]),e("div",null,[o(I,{class:"basic-button w-[80px]",round:"",onClick:g},{default:r(()=>[N("초기화")]),_:1}),o(I,{class:"basic-button",round:"",onClick:y},{default:r(()=>[N("조회")]),_:1})])])}}}),Qt=B({__name:"NoticeManagement",setup(c){const{loadStart:v,loadDone:P}=fe();J(new Date);const d=i(),u=i({fromCreatedAt:null,toCreatedAt:null,title:null,postYn:null,pageNo:null}),h=i({pageNo:1,rowCnt:20}),s=i(null),C=i(),y=i();he(()=>{g()});const g=()=>{v(C.value.gridRef);const t={...u.value,...h.value};O.getNoticeList(t).then(f=>{s.value=f.data}),P()},D=t=>{d.value=t;let f="";d.value||(f="삭제할 데이터가 없습니다.",L.alert(f,"알림",{confirmButtonText:"확인"})),L.confirm("삭제 하시겠습니까?","info",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"info",center:!0}).then(()=>{console.log("checkDelteList.value :: ",d.value);let x={deleteList:d.value};O.deleteNoticeList(x).then(Y=>{Y.data.saveStatus?(U.success("success successfully"),g()):(U.warning(Y.data.message),g())})}).catch(()=>{})},_=()=>{g()},p=()=>{g()};return(t,f)=>(w(),k(V,null,[o(Bt,{ref_key:"noticeManageSearchRef",ref:y,onGetSearchList:_,searchParam:u.value},null,8,["searchParam"]),o(Ft,{ref_key:"noticeManageGridRef",ref:C,data:s.value,pageParam:h.value,onPageChange:p,onDelIdList:D},null,8,["data","pageParam"])],64))}});export{Qt as default};
